{"version":3,"sources":["../src/FilterMenu.ts","../src/FilterCollection.ts","../src/excel-bootstrap-table-filter.ts"],"names":["FilterMenu","th","col","column","tds","$","this","toArray","initialize","menuItems","retrieveMenuItems","menu","dropdownFilterDropdown","appendChild","$trigger","children","$content","$menu","click","toggle","document","el","is","target","has","length","hide","isSelected","value","filter","item","selected","map","indexOf","searchToggle","toggleAll","selectAllCheckbox","HTMLInputElement","checked","toLowerCase","forEach","inputs","input","totalItems","selectedItems","selectAllToggle","clearSearch","searchFilter","val","row","innerHTML","dropdownFilterItem","td","innerText","createElement","className","type","setAttribute","parent","index","toString","dropdownFilterItemSelectAll","dropdownFilterSearch","dropdownFilterSort","direction","span","split","join","dropdownFilterContent","innerDivs","reduce","arr","values","push","sort","a","b","div","firstElementChild","selectAllCheckboxDiv","unshift","searchFilterDiv","outerDiv","innerDiv","concat","html","arrow","icon","FilterCollection","filterMenus","find","idx","rows","filterMenu","bindCheckboxes","bindSelectAllCheckboxes","bindSort","bindSearch","updateRowVisibility","change","data","table","$sortElement","order","attr","keyup","$input","$row","visible","prevSelected","nextSelected","show","switching","i","x","y","shouldSwitch","getElementsByTagName","parentNode","insertBefore","fn","excelTableFilter","options","extend","filterCollection"],"mappings":"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","file":"dist/excel-bootstrap-table-filter-bundle.min.js","sourcesContent":["export class FilterMenu {\n\n  th:                 HTMLElement;\n  tds:                Array<HTMLElement>;\n  menuItems:          Array<MenuItem>;\n  column:             number;\n  menu:               HTMLElement;\n  inputs:             Array<Element>;\n  selectAllCheckbox:  Element;\n  searchFilter:       Element;\n\n  constructor (th: HTMLElement, col: number) {\n    this.th = th;\n    this.column = col;\n    this.tds = $('table tbody tr td:nth-child(' + (this.column + 1) + ')').toArray();\n  }\n\n  public initialize(): void {\n    this.menuItems = this.retrieveMenuItems();\n    this.menu = this.dropdownFilterDropdown();\n    this.th.appendChild(this.menu);\n\n    // variables for click handlers\n    let $trigger = $(this.menu.children[0]);\n    let $content = $(this.menu.children[1]);\n    let $menu = $(this.menu);\n\n    // toggle hide/show when the trigger is clicked\n    $trigger.click(() => $content.toggle());\n\n    $(document).click(function(el) {\n      // hide the content if the user clicks outside of the menu\n      if (!$menu.is(el.target) && $menu.has(el.target).length === 0) {\n        $content.hide();\n      } \n    });\n  }\n\n  public isSelected(value: string): boolean {\n    return this.menuItems.filter(function(item: MenuItem) {\n      return item.selected;\n    }).map(function(item: MenuItem) {\n      return item.value;\n    }).indexOf(value) > -1;\n  }\n\n  public searchToggle(value: string): void {\n    if (value.length > 0) {\n      // deselect All\n      this.toggleAll(false, false);\n      if (this.selectAllCheckbox instanceof HTMLInputElement) this.selectAllCheckbox.checked = false;\n\n      this.menuItems.filter(function(item) {\n        return item.value.toLowerCase().indexOf(value.toLowerCase()) > -1;\n      }).forEach(function(item) {\n        item.selected = true;\n      });\n\n      this.inputs.filter(function(input: HTMLInputElement) {\n        return input.value.toLowerCase().indexOf(value.toLowerCase()) > -1;\n      }).forEach(function(input: HTMLInputElement) {\n        input.checked = true;\n      });\n\n    } else {\n      this.toggleAll(true, false);\n      if (this.selectAllCheckbox instanceof HTMLInputElement) this.selectAllCheckbox.checked = true;\n    }\n  }\n\n\n  public toggle(value: string): void {\n    // delselect inventory\n    this.menuItems.filter(function(item: MenuItem) {\n      return item.value === value;\n    }).forEach(function(item: MenuItem) {\n      item.selected = !item.selected;\n    });\n\n    let totalItems = this.menuItems.length;\n    let selectedItems = this.menuItems.filter(function(item: MenuItem) {\n      return item.selected;\n    }).length;\n\n    if (this.selectAllCheckbox instanceof HTMLInputElement) {\n      this.selectAllCheckbox.checked = (totalItems === selectedItems);\n    }\n  }\n\n  public selectAllToggle(value: boolean): void {\n    this.toggleAll(value, true);\n  }\n\n  private toggleAll(value: boolean, clearSearch: boolean): void {\n    if (clearSearch) $(this.searchFilter).val('');\n    // delselect inventory\n    this.menuItems.forEach(function(item: MenuItem) {\n      item.selected = value;\n    });\n    this.inputs.forEach(function(input: HTMLInputElement) {\n      input.checked = value;\n    });\n  }\n\n  private retrieveMenuItems(): Array<MenuItem> {\n    let inputs = this.inputs;\n    let column = this.column;\n    return this.tds.map(function(el: HTMLElement, row: number) {\n      return {\n        column: column,\n        row: row,\n        value: el.innerHTML,\n        selected: true\n      };\n    });\n  }\n  \n  private dropdownFilterItem(td: HTMLElement): HTMLElement {\n    // build holder div\n    let value = td.innerText;\n    let dropdownFilterItem = document.createElement('div');\n    dropdownFilterItem.className = 'dropdown-filter-item';\n    // build input\n    let input = document.createElement('input');\n    input.type = 'checkbox';\n    input.value = value;\n    input.setAttribute('checked','checked');\n    input.className = 'dropdown-filter-menu-item item';\n    // get index of td element\n    input.setAttribute('data-column', $(td).parent().children().index($(td)).toString());\n    // append input to holding div\n    dropdownFilterItem.appendChild(input);\n    dropdownFilterItem.innerHTML = dropdownFilterItem.innerHTML + ' ' +  value;\n    return dropdownFilterItem;\n  }\n\n  private dropdownFilterItemSelectAll(): HTMLElement {\n    // build holder div\n    let value = 'Select All';\n    let dropdownFilterItemSelectAll = document.createElement('div');\n    dropdownFilterItemSelectAll.className = 'dropdown-filter-item';\n    // build input\n    let input = document.createElement('input');\n    input.type = 'checkbox';\n    input.value = 'Select All';\n    input.setAttribute('checked','checked');\n    input.className = 'dropdown-filter-menu-item select-all';\n    input.setAttribute('data-column', this.column.toString());\n    // append input to holding div\n    dropdownFilterItemSelectAll.appendChild(input);\n    dropdownFilterItemSelectAll.innerHTML = dropdownFilterItemSelectAll.innerHTML + ' ' +  value;\n    return dropdownFilterItemSelectAll;\n  }\n  \n  private dropdownFilterSearch(): HTMLElement {\n    // build holder div\n    let dropdownFilterItem = document.createElement('div');\n    dropdownFilterItem.className = 'dropdown-filter-search';\n    // build input\n    let input = document.createElement('input');\n    input.type = 'text';\n    input.className = 'dropdown-filter-menu-search form-control';\n    input.setAttribute('data-column', this.column.toString());\n    input.setAttribute('placeholder', 'search');\n    // append input to holding div\n    dropdownFilterItem.appendChild(input);\n    return dropdownFilterItem;\n  }\n\n  private dropdownFilterSort(direction: string): HTMLElement {\n    // build holder div\n    let dropdownFilterItem = document.createElement('div');\n    dropdownFilterItem.className = 'dropdown-filter-sort';\n    // build span\n    let span = document.createElement('span');\n    span.className = direction.toLowerCase().split(' ').join('-');\n    span.setAttribute('data-column', this.column.toString());\n    span.innerText = direction;\n    // append input to holding div\n    dropdownFilterItem.appendChild(span);\n    return dropdownFilterItem;\n  }\n\n  private dropdownFilterContent(): HTMLElement {\n    // build holder div\n    let dropdownFilterContent = document.createElement('div');\n    dropdownFilterContent.className = 'dropdown-filter-content';\n\n    let innerDivs = this.tds.reduce(function(arr, el) {\n      let values = arr.map((el) => el.innerText);\n      if (values.indexOf(el.innerText) < 0) arr.push(el);\n      return arr;\n    }, [])\n    .sort(function(a, b) {\n      return a.innerText.toLowerCase() > b.innerText.toLowerCase() ? 1 : -1;\n    })\n    .map(this.dropdownFilterItem)\n\n    // map inputs to instance\n    this.inputs = innerDivs.map((div) => div.firstElementChild);\n\n    // add select all checkbox\n    let selectAllCheckboxDiv = this.dropdownFilterItemSelectAll();\n    this.selectAllCheckbox = selectAllCheckboxDiv.firstElementChild;\n    innerDivs.unshift(selectAllCheckboxDiv);\n\n    let searchFilterDiv = this.dropdownFilterSearch();\n    this.searchFilter = searchFilterDiv.firstElementChild;\n\n    // create outer div\n    let outerDiv = innerDivs.reduce(function(outerDiv, innerDiv) {\n      outerDiv.appendChild(innerDiv);\n      return outerDiv;\n    }, document.createElement('div'));\n    outerDiv.className = 'checkbox-container';\n\n    return [ this.dropdownFilterSort( 'A to Z'), \n             this.dropdownFilterSort( 'Z to A'),\n             searchFilterDiv\n      ]\n      .concat(outerDiv)\n      .reduce(function(html, el) {\n        html.appendChild(el);\n        return html;\n    }, dropdownFilterContent);\n  }\n\n  private dropdownFilterDropdown(): HTMLElement {\n    // build holder div\n    let dropdownFilterDropdown = document.createElement('div');\n    dropdownFilterDropdown.className = 'dropdown-filter-dropdown';\n    let arrow = document.createElement('span');\n    arrow.className = 'glyphicon glyphicon-arrow-down dropdown-filter-icon';\n    let icon = document.createElement('i');\n    icon.className = 'arrow-down';\n    arrow.appendChild(icon);\n    dropdownFilterDropdown.appendChild(arrow);\n    dropdownFilterDropdown.appendChild(this.dropdownFilterContent());\n    return dropdownFilterDropdown;\n  }\n\n}\n","import { FilterMenu } from './FilterMenu'\n\nexport class FilterCollection {\n\n  filterMenus: Array<FilterMenu>;\n  rows: Array<HTMLElement>;\n  target: HTMLElement;\n\n  constructor (target: JQuery) {\n    this.filterMenus = target.find('th').toArray().map(function(th: HTMLElement, idx: number) {\n      return new FilterMenu(th, idx);\n    });\n    this.rows = target.find('tbody').find('tr').toArray();\n    this.target = target[0];\n  }\n\n  public initialize(): void {\n    this.filterMenus.forEach(function(filterMenu) {\n      filterMenu.initialize();\n    });\n    this.bindCheckboxes();\n    this.bindSelectAllCheckboxes();\n    this.bindSort();\n    this.bindSearch();\n  }\n\n  private bindCheckboxes(): void {\n    let filterMenus = this.filterMenus;\n    let rows = this.rows;\n    let updateRowVisibility = this.updateRowVisibility;\n    $('.dropdown-filter-menu-item.item').change(function() {\n      let column = $(this).data('column');\n      let value = $(this).val();\n      filterMenus[column].toggle(value);\n      updateRowVisibility(filterMenus, rows);\n    });\n  }\n\n  private bindSelectAllCheckboxes(): void {\n    let filterMenus = this.filterMenus;\n    let rows = this.rows;\n    let updateRowVisibility = this.updateRowVisibility;\n    $('.dropdown-filter-menu-item.select-all').change(function() {\n      let column = $(this).data('column');\n      let value = this.checked;\n      filterMenus[column].selectAllToggle(value);\n      updateRowVisibility(filterMenus, rows);\n    });\n  }\n  \n  private bindSort(): void {\n    let filterMenus = this.filterMenus;\n    let rows = this.rows;\n    let sort = this.sort;\n    let table = this.target;\n    let updateRowVisibility = this.updateRowVisibility;\n    $('.dropdown-filter-sort').click(function() {\n      let $sortElement = $(this).find('span');\n      let column = $sortElement.data('column');\n      let order = $sortElement.attr('class');\n      sort(column, order, table);\n      updateRowVisibility(filterMenus, rows);\n    });\n  }\n\n  private bindSearch(): void {\n    let filterMenus = this.filterMenus;\n    let rows = this.rows;\n    let sort = this.sort;\n    let table = this.target;\n    let updateRowVisibility = this.updateRowVisibility;\n    $('.dropdown-filter-search').keyup(function() {\n      let $input = $(this).find('input');\n      let column = $input.data('column');\n      let value = $input.val();\n      filterMenus[column].searchToggle(value);\n      updateRowVisibility(filterMenus, rows);\n    });\n  }\n\n  private updateRowVisibility(filterMenus: Array<FilterMenu>, rows: Array<HTMLElement>): void {\n    rows.forEach(function(row) {\n      let $row = $(row)\n      let visible = $row.find('td').toArray().map(function(el, column) {\n        return filterMenus[column].isSelected(el.innerText);\n      }).reduce(function(prevSelected, nextSelected) {\n        return prevSelected && nextSelected;\n      }, true);\n      visible ? $row.show() : $row.hide();\n    });\n  }\n\n  private sort(column: number, order: string, table: HTMLElement): void {\n    var rows, switching, i, x, y, shouldSwitch;\n    switching = true;\n    while (switching) {\n      switching = false;\n      rows = table.getElementsByTagName(\"tr\");\n      for (i = 1; i < (rows.length - 1); i++) {\n        shouldSwitch = false;\n        x = rows[i].getElementsByTagName(\"td\")[column];\n        y = rows[i + 1].getElementsByTagName(\"td\")[column];\n        if (order === 'a-to-z') {\n          if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {\n            shouldSwitch= true;\n            break;\n          }\n        } else {\n          if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {\n            shouldSwitch= true;\n            break;\n          }\n        }\n      }\n      if (shouldSwitch) {\n        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);\n        switching = true;\n      }\n    }\n  }\n\n}\n","import $ from 'jquery';\nimport { FilterCollection } from './FilterCollection'\n\n// Define the plugin function on the jQuery extension point.\n$.fn.excelTableFilter = function (this: JQuery, options: Options) {\n  let target = this;\n  // Merge the global options with the per-call options.\n  options = $.extend({}, $.fn.excelTableFilter.options, options);\n  \n  let filterCollection = new FilterCollection(target);\n  filterCollection.initialize();\n\n  // Return the jQuery object for chaining.\n  return target;\n}\n\n// Define the plugin's global default options.\n$.fn.excelTableFilter.options = {};\n"]}